{"ast":null,"code":"import _slicedToArray from\"C:/Users/Joel John Joseph/Desktop/SEM PROJ IDEAS/khet-e/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{Col,Container,Row,Image,ListGroup,Card,Button,Form}from'react-bootstrap';import{getroductsDetails,createProductReview}from'./../../actions/supplierProduct';import Loader from'../../components/Loader/Loader';import Message from'../../components/Message/Message';import Meta from'../../components/Helmet/Meta';var FarmerProduct=function FarmerProduct(_ref){var history=_ref.history,match=_ref.match;var userId=match.params.id;var dispatch=useDispatch();var FarmerProductDetails=useSelector(function(state){return state.FarmerProductDetails;});var loading=FarmerProductDetails.loading,error=FarmerProductDetails.error,product=FarmerProductDetails.product;var farmerReviewCreate=useSelector(function(state){return state.farmerReviewCreate;});var loadingReview=farmerReviewCreate.loading,loadingError=farmerReviewCreate.error,successReview=farmerReviewCreate.success;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),rating=_useState2[0],setRating=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];useEffect(function(){if(successReview){// history.push('/admin/dashboard')\n}else{if(!product.name||product._id!==userId){dispatch(getroductsDetails(userId));}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dispatch,match,successReview,history,userId]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createProductReview(match.params.id,{rating:rating,comment:comment}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"productScreen\",children:[/*#__PURE__*/_jsx(Meta,{title:\"Khet-E | Admin Farmer Review\"}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-go-back btn-dark\",to:\"/admin/supplierproducts\",children:\"GO BACK\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Row,{className:\"p-1 seed-product\",children:[/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsx(Image,{className:\"mx-auto image-machine\",src:product.image,alt:product.name,width:200})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(ListGroup,{className:\"borderless\",variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Name \"}),product.name]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Address \"}),\" \",product.address]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Product Description\",/*#__PURE__*/_jsx(\"br\",{})]}),\" \",product.description]}),product.phonenumber?/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\" Contact Number\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"a\",{rel:\"noreferrer\",target:\"_blank\",href:\"https://wa.me/\".concat(product.phonenumber),children:product.phonenumber})]}):'',/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Crop \"}),product.cropSelection]}),product.storage?/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Quantity \"}),product.storage,\" kg\"]}):'']})})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ListGroup,{children:/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Write a Farmer Review\"}),successReview&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Review submitted successfully\"}),loadingReview&&/*#__PURE__*/_jsx(Loader,{}),loadingError&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:loadingError}),userInfo&&userInfo.isAdmin?/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"rating\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:rating,onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 - Poor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 - Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 - Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4 - Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5 - Excellent\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"comment\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Feedback\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",row:\"3\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{disabled:loadingReview,type:\"submit\",variant:\"primary\",children:\"Submit\"})]}):/*#__PURE__*/_jsxs(Message,{children:[\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"sign in\"}),\" to write a review\",' ']})]})})})})]})]})]});};export default FarmerProduct;","map":{"version":3,"sources":["C:/Users/Joel John Joseph/Desktop/SEM PROJ IDEAS/khet-e/frontend/src/screens/FarmerProducts/FarmerProducts.jsx"],"names":["React","useState","useEffect","useDispatch","useSelector","Link","Col","Container","Row","Image","ListGroup","Card","Button","Form","getroductsDetails","createProductReview","Loader","Message","Meta","FarmerProduct","history","match","userId","params","id","dispatch","FarmerProductDetails","state","loading","error","product","farmerReviewCreate","loadingReview","loadingError","successReview","success","userLogin","userInfo","rating","setRating","comment","setComment","name","_id","submitHandler","e","preventDefault","image","address","description","phonenumber","cropSelection","storage","isAdmin","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row,\r\n    Image,\r\n    ListGroup,\r\n    Card,\r\n    Button,\r\n    Form\r\n} from 'react-bootstrap';\r\nimport { getroductsDetails, createProductReview } from './../../actions/supplierProduct'\r\nimport Loader from '../../components/Loader/Loader';\r\nimport Message from '../../components/Message/Message';\r\nimport Meta from '../../components/Helmet/Meta';\r\n\r\nconst FarmerProduct = ({ history, match }) => {\r\n\r\n    const userId = match.params.id\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const FarmerProductDetails = useSelector(state => state.FarmerProductDetails)\r\n    const { loading, error, product } = FarmerProductDetails\r\n\r\n    const farmerReviewCreate = useSelector(state => state.farmerReviewCreate)\r\n    const { loading: loadingReview, error: loadingError, success: successReview } = farmerReviewCreate\r\n\r\n    const userLogin = useSelector((state) => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const [rating, setRating] = useState(0)\r\n    const [comment, setComment] = useState('')\r\n\r\n    useEffect(() => {\r\n\r\n        if (successReview) {\r\n\r\n            // history.push('/admin/dashboard')\r\n        } else {\r\n            if (!product.name || product._id !== userId) {\r\n                dispatch(getroductsDetails(userId))\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [dispatch, match, successReview, history, userId])\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault()\r\n        dispatch(createProductReview(match.params.id, {\r\n            rating,\r\n            comment,\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <div className=\"productScreen\">\r\n            <Meta\r\n                title=\"Khet-E | Admin Farmer Review\"\r\n            />\r\n            <Container>\r\n                <Link className=\"btn btn-go-back btn-dark\" to=\"/admin/supplierproducts\">GO BACK</Link>\r\n                {\r\n                    loading\r\n                        ? <Loader />\r\n                        : error\r\n                            ? <Message variant='danger'>{error}</Message>\r\n                            : (\r\n                                <Row className=\"p-1 seed-product\" >\r\n                                    <Col md={5}>\r\n                                        <Image className=\"mx-auto image-machine\" src={product.image} alt={product.name} width={200} />\r\n                                    </Col>\r\n                                    <Col md={4}>\r\n                                        <ListGroup className=\"borderless\" variant='flush'>\r\n                                            <ListGroup.Item>\r\n                                                <h4>Name </h4>{product.name}\r\n                                            </ListGroup.Item>\r\n                                            <ListGroup.Item>\r\n                                                <h4>Address </h4> {product.address}\r\n                                            </ListGroup.Item>\r\n                                            <ListGroup.Item>\r\n                                                <h4>Product Description<br /></h4> {product.description}\r\n                                            </ListGroup.Item>\r\n                                            {\r\n                                                product.phonenumber ? (\r\n                                                    <ListGroup.Item>\r\n                                                        <h4> Contact Number<br /></h4>\r\n                                                        <a rel=\"noreferrer\" target='_blank' href={`https://wa.me/${product.phonenumber}`}>\r\n                                                            {product.phonenumber}\r\n                                                        </a>\r\n                                                    </ListGroup.Item>\r\n                                                ) : ''\r\n                                            }\r\n                                            <ListGroup.Item>\r\n                                                <Row>\r\n                                                    <Col md={6}>\r\n                                                        <h4>Crop </h4>{product.cropSelection}\r\n                                                    </Col>\r\n                                                    {\r\n                                                        product.storage ? (\r\n                                                            <Col md={6}>\r\n                                                                <h4>Quantity </h4>{product.storage} kg\r\n                                                            </Col>\r\n                                                        ) : ''\r\n                                                    }\r\n                                                </Row>\r\n                                            </ListGroup.Item>\r\n                                        </ListGroup>\r\n                                    </Col>\r\n                                    <Col md={3}>\r\n                                        <Card>\r\n                                            <ListGroup>\r\n                                                <ListGroup.Item>\r\n                                                    <p>Write a Farmer Review</p>\r\n                                                    {successReview && (\r\n                                                        <Message variant='success'>\r\n                                                            Review submitted successfully\r\n                                                        </Message>\r\n                                                    )}\r\n                                                    {loadingReview && <Loader />}\r\n                                                    {loadingError && (\r\n                                                        <Message variant='danger'>{loadingError}</Message>\r\n                                                    )}\r\n                                                    {userInfo && userInfo.isAdmin ? (\r\n                                                        <Form onSubmit={submitHandler}>\r\n                                                            <Form.Group controlId='rating'>\r\n                                                                <Form.Label>Rating</Form.Label>\r\n                                                                <Form.Control\r\n                                                                    as='select'\r\n                                                                    value={rating}\r\n                                                                    onChange={(e) => setRating(e.target.value)}\r\n                                                                >\r\n                                                                    <option value=''>Select...</option>\r\n                                                                    <option value='1'>1 - Poor</option>\r\n                                                                    <option value='2'>2 - Fair</option>\r\n                                                                    <option value='3'>3 - Good</option>\r\n                                                                    <option value='4'>4 - Very Good</option>\r\n                                                                    <option value='5'>5 - Excellent</option>\r\n                                                                </Form.Control>\r\n                                                            </Form.Group>\r\n                                                            <Form.Group controlId='comment'>\r\n                                                                <Form.Label>Feedback</Form.Label>\r\n                                                                <Form.Control\r\n                                                                    as='textarea'\r\n                                                                    row='3'\r\n                                                                    value={comment}\r\n                                                                    onChange={(e) => setComment(e.target.value)}\r\n                                                                ></Form.Control>\r\n                                                            </Form.Group>\r\n                                                            <Button\r\n                                                                disabled={loadingReview}\r\n                                                                type='submit'\r\n                                                                variant='primary'\r\n                                                            >Submit</Button>\r\n                                                        </Form>\r\n                                                    ) : (\r\n                                                            <Message>\r\n                                                                Please <Link to='/login'>sign in</Link> to write a review{' '}\r\n                                                            </Message>\r\n                                                        )}\r\n                                                </ListGroup.Item>\r\n                                            </ListGroup>\r\n                                        </Card>\r\n                                    </Col>\r\n                                </Row>\r\n                            )\r\n                }\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FarmerProduct\r\n"]},"metadata":{},"sourceType":"module"}