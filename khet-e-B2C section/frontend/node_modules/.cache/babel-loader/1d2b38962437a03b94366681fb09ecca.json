{"ast":null,"code":"import _slicedToArray from\"C:/Users/Joel John Joseph/Desktop/SEM PROJ IDEAS/khet-e/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from'react-redux';import{Image}from'react-bootstrap';import{GoogleMap,withScriptjs,withGoogleMap,Marker,InfoWindow}from'react-google-maps';import Message from'../../Message/Message';import Loader from'../../Loader/Loader';import{listSupplierProducts}from'../../../actions/supplierProduct';import MapStyles from'./MapStyles';import Rating from'./Rating/Rating';var Map=function Map(){var dispatch=useDispatch();var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedPlace=_useState2[0],setSelectedPlace=_useState2[1];var supplierProductList=useSelector(function(state){return state.supplierProductList;});var loadingProducts=supplierProductList.loading,errorProducts=supplierProductList.error,products=supplierProductList.products;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(!userInfo.isAdmin&&!userInfo){history.push('/login');}else{dispatch(listSupplierProducts());}},[dispatch,history,userInfo]);return/*#__PURE__*/_jsxs(GoogleMap,{defaultCenter:{lat:6.927079,lng:79.861244},defaultZoom:10,defaultOptions:{styles:MapStyles},children:[loadingProducts?/*#__PURE__*/_jsx(Loader,{}):errorProducts?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorProducts}):products.map(function(place){return/*#__PURE__*/_jsx(Marker,{position:{lat:place.latitude,lng:place.longitude},onClick:function onClick(){setSelectedPlace(place);},icon:{url:'/mapIcon.svg',scaledSize:new window.google.maps.Size(25,25)}},place._id);}),selectedPlace&&/*#__PURE__*/_jsx(InfoWindow,{position:{lat:selectedPlace.latitude,lng:selectedPlace.longitude},onCloseClick:function onCloseClick(){setSelectedPlace(null);},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Image,{className:\"mx-auto d-block img-fluid mb-1\",rounded:true,width:\"120px\",src:selectedPlace.image,alt:selectedPlace.name}),/*#__PURE__*/_jsx(\"h4\",{style:{textAlign:\"center\"},children:selectedPlace.cropSelection}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Farmer: \",/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"bold\"},children:selectedPlace.name}),/*#__PURE__*/_jsx(\"br\",{}),\"Description: \",selectedPlace.description,/*#__PURE__*/_jsx(\"br\",{}),\"Address: \",selectedPlace.address,/*#__PURE__*/_jsx(\"br\",{}),\"Reviewed: \",selectedPlace.isReviwed?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:\"green\"}}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Rating,{text:\"Rating\",value:selectedPlace.rating})})]}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:\"red\"}})]})]})})]});};var WrappedMap=withScriptjs(withGoogleMap(Map));export default WrappedMap;","map":{"version":3,"sources":["C:/Users/Joel John Joseph/Desktop/SEM PROJ IDEAS/khet-e/frontend/src/components/DashBoard/Map/Map.jsx"],"names":["React","useEffect","useState","useHistory","useDispatch","useSelector","Image","GoogleMap","withScriptjs","withGoogleMap","Marker","InfoWindow","Message","Loader","listSupplierProducts","MapStyles","Rating","Map","dispatch","history","selectedPlace","setSelectedPlace","supplierProductList","state","loadingProducts","loading","errorProducts","error","products","userLogin","userInfo","isAdmin","push","lat","lng","styles","map","place","latitude","longitude","url","scaledSize","window","google","maps","Size","_id","image","name","textAlign","cropSelection","fontWeight","description","address","isReviwed","color","rating","WrappedMap"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Image } from 'react-bootstrap'\r\nimport {\r\n    GoogleMap,\r\n    withScriptjs,\r\n    withGoogleMap,\r\n    Marker,\r\n    InfoWindow\r\n} from 'react-google-maps'\r\nimport Message from '../../Message/Message'\r\nimport Loader from '../../Loader/Loader'\r\nimport { listSupplierProducts } from '../../../actions/supplierProduct'\r\nimport MapStyles from './MapStyles'\r\nimport Rating from './Rating/Rating'\r\n\r\nconst Map = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    let history = useHistory()\r\n\r\n    const [selectedPlace, setSelectedPlace] = useState(null)\r\n\r\n    const supplierProductList = useSelector(state => state.supplierProductList)\r\n    const { loading: loadingProducts, error: errorProducts, products } = supplierProductList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    useEffect(() => {\r\n        if (!userInfo.isAdmin && !userInfo) {\r\n            history.push('/login')\r\n        } else {\r\n            dispatch(listSupplierProducts())\r\n        }\r\n    }, [dispatch, history, userInfo])\r\n\r\n    return (\r\n        <GoogleMap\r\n            defaultCenter={{ lat: 6.927079, lng: 79.861244 }}\r\n            defaultZoom={10}\r\n            defaultOptions={{ styles: MapStyles }}\r\n        >\r\n            {\r\n                loadingProducts ? <Loader />\r\n                    : errorProducts\r\n                        ? <Message variant='danger'>{errorProducts}</Message>\r\n                        : (\r\n                            products.map(place => (\r\n                                <Marker\r\n                                    key={place._id}\r\n                                    position={{\r\n                                        lat: place.latitude,\r\n                                        lng: place.longitude\r\n                                    }}\r\n                                    onClick={() => {\r\n                                        setSelectedPlace(place)\r\n                                    }}\r\n                                    icon={{\r\n                                        url: '/mapIcon.svg',\r\n                                        scaledSize: new window.google.maps.Size(25, 25)\r\n                                    }}\r\n                                />\r\n                            ))\r\n                        )\r\n\r\n            }\r\n            {\r\n                selectedPlace && (\r\n                    <InfoWindow\r\n                        position={{\r\n                            lat: selectedPlace.latitude,\r\n                            lng: selectedPlace.longitude\r\n                        }}\r\n                        onCloseClick={() => {\r\n                            setSelectedPlace(null)\r\n                        }}\r\n                    >\r\n                        <div>\r\n                            <Image className=\"mx-auto d-block img-fluid mb-1\" rounded width=\"120px\" src={selectedPlace.image} alt={selectedPlace.name} />\r\n                            <h4 style={{ textAlign: \"center\" }}>{selectedPlace.cropSelection}</h4>\r\n                            <p>\r\n                                Farmer: <span style={{ fontWeight: \"bold\" }}>{selectedPlace.name}</span><br />\r\n                                Description: {selectedPlace.description}<br />\r\n                                Address: {selectedPlace.address}<br />\r\n                                Reviewed: {\r\n                                    selectedPlace.isReviwed\r\n                                        ? (<>\r\n                                            <i className=\"fas fa-check\" style={{ color: \"green\" }}></i>\r\n                                            <p><Rating text=\"Rating\" value={selectedPlace.rating} /></p>\r\n                                        </>\r\n                                        )\r\n                                        : (<i className=\"fas fa-times\" style={{ color: \"red\" }} />)\r\n                                }\r\n                            </p>\r\n                        </div>\r\n                    </InfoWindow>\r\n                )\r\n            }\r\n        </GoogleMap>\r\n\r\n    )\r\n}\r\n\r\nconst WrappedMap = withScriptjs(withGoogleMap(Map))\r\n\r\nexport default WrappedMap\r\n"]},"metadata":{},"sourceType":"module"}